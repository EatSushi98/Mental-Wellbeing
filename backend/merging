import cv2
import os

# Path to combined dataset where images are stored
data_path = 'backend/ComData/train'

# Iterate through emotion folders
for emotion in os.listdir(data_path):
    emotion_path = os.path.join(data_path, emotion)
    
    for img in os.listdir(emotion_path):
        img_path = os.path.join(emotion_path, img)

        # Read and check if the image is RGB
        image = cv2.imread(img_path)
        
        if len(image.shape) == 3:  # If the image has 3 channels (RGB)
            # Convert to grayscale
            gray_image = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)

            # Resize to 48x48 (FER2013 size)
            resized_image = cv2.resize(gray_image, (48, 48))

            # Overwrite original with grayscale
            cv2.imwrite(img_path, resized_image)

print("âœ… All images converted to grayscale and resized successfully!")
